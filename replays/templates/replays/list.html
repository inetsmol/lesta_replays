{# replays/templates/replays/list.html #}
{% extends "base.html" %}
{% load static %}
{% load custom_comments_tags %}
{% load tz %}
{% load comments %}
{% load webp_tags %}
{% block body_class %}replays index{% endblock %}
{#{% block content_mod %}content--solo{% endblock %}#}
{% block content %}
    {% load static humanize %}
    {# Подключение wot_record_skin.css удалено - мигрировано на Tailwind #}
    {#    <div id="content" class="content content--solo">#}

    {% if page_title %}
    <h1 class="text-3xl font-bold mb-4">{{ page_title }}</h1>
    {% endif %}

    {% if news_list %}
    <!-- Bento Grid News Section -->
    <div class="news-bento-grid mb-8 max-w-5xl">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-bold text-white">Последние новости</h2>
            <a href="{% url 'news:news_list' %}" class="btn btn--ghost">
                <span>Все новости</span>
                <i class="fas fa-arrow-right text-xs"></i>
            </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 auto-rows-[160px]">
            {% for news in news_list|slice:":3" %}
                {% if forloop.first %}
                    <!-- Первая новость - занимает 2/3 ширины и 2 ряда -->
                    <a href="{% url 'news:news_detail' news.id %}" class="md:col-span-2 md:row-span-2 group relative overflow-hidden rounded-2xl shadow-xl transition-all duration-300 hover:shadow-2xl hover:scale-[1.02]">
                        {% if news.image %}
                            <img src="{{ news.image.url }}" alt="{{ news.title }}" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" loading="eager">
                        {% else %}
                            <div class="absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center">
                                <i class="fas fa-newspaper text-gray-700 text-6xl"></i>
                            </div>
                        {% endif %}
                        <div class="absolute inset-0 bg-gradient-to-t from-black/95 via-black/50 to-transparent opacity-90 group-hover:opacity-95 transition-opacity duration-300"></div>
                        <div class="absolute inset-0 p-6 md:p-8 flex flex-col justify-end">
                            <div class="mb-3">
                                <span class="inline-block px-3 py-1 bg-red-600/90 backdrop-blur-sm rounded-full text-xs font-bold text-white uppercase tracking-wide">
                                    Главное
                                </span>
                            </div>
                            <h3 class="text-2xl md:text-3xl font-bold text-white mb-3 leading-tight drop-shadow-2xl group-hover:text-yellow-400 transition-colors duration-300">
                                {{ news.title }}
                            </h3>
                            <p class="text-gray-200 text-sm md:text-base leading-relaxed line-clamp-3 drop-shadow-lg">
                                {{ news.text }}
                            </p>
                        </div>
                        <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center">
                                <i class="fas fa-arrow-right text-white text-lg"></i>
                            </div>
                        </div>
                    </a>
                {% else %}
                    <!-- Вторая и третья новости - занимают 1/3 ширины -->
                    <a href="{% url 'news:news_detail' news.id %}" class="group relative overflow-hidden rounded-2xl shadow-xl transition-all duration-300 hover:shadow-2xl hover:scale-[1.02]">
                        {% if news.image %}
                            <img src="{{ news.image.url }}" alt="{{ news.title }}" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" loading="lazy">
                        {% else %}
                            <div class="absolute inset-0 bg-gradient-to-br from-blue-900 to-blue-800 flex items-center justify-center">
                                <i class="fas fa-newspaper text-blue-700 text-5xl"></i>
                            </div>
                        {% endif %}
                        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent opacity-90 group-hover:opacity-95 transition-opacity duration-300"></div>
                        <div class="absolute inset-0 p-5 flex flex-col justify-end">
                            <h3 class="text-xl font-bold text-white mb-2 leading-tight drop-shadow-xl group-hover:text-yellow-400 transition-colors duration-300 line-clamp-2">
                                {{ news.title }}
                            </h3>
                            <p class="text-gray-300 text-sm line-clamp-2 drop-shadow-lg">
                                {{ news.text }}
                            </p>
                        </div>
                        <div class="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <div class="w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center">
                                <i class="fas fa-arrow-right text-white text-sm"></i>
                            </div>
                        </div>
                    </a>
                {% endif %}
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% include "replays/_replay_list_content.html" %}

{% endblock %}
