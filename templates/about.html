{% extends "base.html" %}
{% load static %}

{% block title %}О проекте — Реплеи{% endblock %}

{% block content %}
    <div id="content">

            <!-- hero -->
            <section class="mb-24">
                <h1 class="mt-0 mb-8">Реплеи Мир танков от Лесты</h1>
                <p class="mb-0">
                    Портал для загрузки, просмотра и анализа статистики реплеев.
                </p>
            </section>

            <!-- цели -->
            <section class="mb-24">
                <h2 class="mt-0">Цели проекта</h2>
                <div class="card">
                    <ul class="mb-0">
                        <li>Быстрая загрузка и удобный поиск и просмотр результатов реплеев прямо в браузере.</li>
                        <li>Аккуратные страницы боя: карта, техника, результаты, достижения.</li>
                        <li>Единый стиль и читаемые подсказки к медалям/условиям.</li>
                    </ul>
                </div>
            </section>

            <!-- как это работает -->
            <section class="mb-24">
                <h2 class="mt-0">Как это работает</h2>
                <div class="card">
                    <ol class="mb-0">
                        <li>Нажмите «Загрузить» в шапке и выберите файл реплея.</li>
                        <li>Мы парсим данные боя и сохраняем их в базу.</li>
                        <li>Готовая страница боя открывается с картинками, цифрами и достижениями.</li>
                    </ol>
                </div>
            </section>

            <!-- приватность -->
            <section class="mb-24">
                <h2 class="mt-0">Приватность</h2>
                <div class="card">
                    <p class="mb-0">
                        Мы храним только те данные, которые содержатся в самом реплее. Личные данные
                        аккаунта не запрашиваем и не обрабатываем.
                    </p>
                </div>
            </section>

            <!-- история изменений -->
            <section class="mb-24" id="changelog">
                <h2 class="mt-0">История изменений</h2>
                <div class="card">
                    <details id="changelog-details">
                        <summary class="changelog-summary">
                            Показать изменения <span class="text-muted-sm">(последнее: 03.12.2025)</span>
                        </summary>

                        <div class="mt-12">

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-12-03">03.12.2025</time>
                                    <span class="badge badge-primary ml-8">UX/UI</span>
                                </h3>
                                <ul class="mb-0">
                                    <li>Добавлена детальная информация по каждому игроку на вкладке командный результат.</li>
                                    <li><strong>Добавлены иконки взводов:</strong> новые визуальные индикаторы для отображения взводов в результатах боя.</li>
                                    <li><strong>Улучшена функциональность модального окна загрузки:</strong>
                                        <ul class="mt-4">
                                            <li>Добавлена ссылка на результат загруженного реплея</li>
                                            <li>Добавлена кнопка копирования ссылки на реплей</li>
                                        </ul>
                                    </li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-11-26">26.11 — 02.12.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Добавлено отображение полученной отметки на стволе в бою (если была получена).</li>
                                    <li>Улучшена логика отображения медалей и достижений.</li>
                                    <li>Добавлены переводы для формы комментариев.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-11-21">21.11.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Улучшена пагинация: выбор количества элементов на странице.</li>
                                    <li>Обновлён дизайн карточек реплеев.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-11-20">20.11.2025</time>
                                    <span class="badge badge-primary ml-8">Новый раздел</span>
                                </h3>
                                <ul class="mb-0">
                                    <li><strong>Добавлен раздел новостей</strong> — следите за обновлениями портала.</li>
                                    <li>Переработан дизайн страницы фильтров.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-11-18">18.11.2025</time>
                                    <span class="badge badge-primary ml-8">Авторизация</span>
                                </h3>
                                <ul class="mb-0">
                                    <li><strong>Добавлен вход через Lesta Games</strong> — используйте игровой аккаунт для входа.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-10-29">29.10.2025</time>
                                    <span class="badge badge-success ml-8">Производительность</span>
                                </h3>
                                <ul class="mb-0">
                                    <li><strong>Масштабная оптимизация страницы деталей реплея:</strong>
                                        <ul class="mt-4">
                                            <li>Ускорение обработки на <strong>83%</strong> (с 16.30 мс до 2.70 мс)</li>
                                            <li>Сокращение SQL запросов на <strong>81%</strong> (с 16 до 3 запросов)</li>
                                            <li>Оптимизация парсинга JSON на <strong>90%+</strong> (с 10-15 до 1 раза)</li>
                                        </ul>
                                    </li>
                                    <li>Реализован <code>ReplayDataCache</code> для кеширования данных из JSON payload с ленивой загрузкой свойств.</li>
                                    <li>Добавлена пакетная загрузка связанных объектов (танки, достижения) одним запросом вместо N+1 запросов.</li>
                                    <li>Оптимизированы методы <code>ExtractorV2</code> с использованием мемоизации и предзагруженных кешей.</li>
                                    <li>Удалены устаревшие методы <code>get_player_interactions()</code> и <code>_avatar_info()</code>, вызывавшие множественные запросы к БД.</li>
                                    <li>Добавлены инструменты для мониторинга производительности: бенчмарки, профилирование, анализ SQL запросов.</li>
                                    <li>Реализованы unit-тесты для <code>ReplayDataCache</code> и оптимизированного <code>ExtractorV2</code>.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-10-29">21-29.10.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Добавлена функциональность кнопок скачивания и загрузки реплеев с проверкой авторизации и уведомлениями.</li>
                                    <li>Добавлено требование авторизации для скачивания и загрузки реплеев с перенаправлением неавторизованных пользователей.</li>
                                    <li>Исправлена ширина строк с премиум данными на вкладке личных данных для улучшения выравнивания.</li>
                                    <li>Улучшен вид страницы детального просмотра реплея: добавлена информация о карте и типе боя, обновлены CSS стили.</li>
                                    <li>Добавлены иконки новых танков.</li>
                                    <li>Обновлена ссылка на группу в Telegram в навигационной панели.</li>
                                    <li>Добавлена ссылка на группу Telegram на странице "О проекте".</li>
                                    <li>Улучшено сообщение о верификации email.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-10-20">18-20.10.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Исправлено отображение кредитов и опыта в детальной информации о реплее.</li>
                                    <li>Улучшена сортировка таблиц с результатами команд на странице детального просмотра реплея.</li>
                                    <li>Исправлена опечатка в сообщении подтверждения email.</li>
                                    <li>Улучшена обработка ошибок и статусов файлов в модальном окне загрузки реплеев.</li>
                                    <li>Переработаны компоненты боковой панели: обновлены стили и структура секций "Друзья" и "Поддержка".</li>
                                    <li>Добавлена кастомная форма регистрации с русскими сообщениями об ошибках.</li>
                                    <li>Улучшена обработка ошибок в шаблоне регистрации.</li>
                                    <li>Обновлены тексты на русском языке для подтверждения email.</li>
                                    <li>Улучшен дизайн уведомлений и добавлены шаблоны для подтверждения email.</li>
                                    <li>Обновлены настройки аутентификации и изменены тексты меток на странице входа.</li>
                                    <li>Добавлена поддержка OAuth через Яндекс (дополнительно к Google).</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-10-16">15-16.10.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Обновлены изображения для состояния боевых результатов (победа, поражение, ничья) на странице деталей реплея.</li>
                                    <li>Исправлено отображение фонов для результатов боя (улучшенное позиционирование и стили).</li>
                                    <li>Улучшена верстка карточек реплеев в списке с использованием Tailwind CSS классов.</li>
                                    <li>Добавлена обработка реплеев неподдерживаемых версий: теперь они сохраняются в отдельную директорию для анализа вместо удаления.</li>
                                    <li>Улучшена верстка модальных уведомлений при загрузке реплеев.</li>
                                    <li>Переименовано отображение даты в списке реплеев на "Дата загрузки" для большей ясности.</li>
                                    <li>Добавлена возможность сортировки таблиц с результатами команд в реплеях.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-10-14">14.10.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Добавлены счётчики просмотров и скачиваний реплеев и отображены в списке.</li>
                                    <li>Расширены сортировки списка: теперь можно упорядочивать по дате загрузки, комментариям, просмотрам и скачиваниям.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-10-13">13.10.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Добавлены комментарии к реплеям.</li>
                                    <li>В списке реплеев отображается количество комментариев.</li>
                                    <li>Добавлено поле для фильтрации реплеев по описанию.</li>
                                    <li>Исправлена верстка фильтров.</li>
                                    <li>Добавлено новое значение "Натиск" для режима "comp7".</li>
                                    <li>Добавлен функционал удаления реплеев.</li>
                                    <li>Добавлена аутентификация и регистрация пользователей.</li>
                                    <li>Добавлена возможность загружать реплеи только авторизованным пользователям.</li>
                                    <li>Добавлена поддержка OAuth через Google.</li>
                                </ul>
                           </article>

                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-10-08">08.10.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Полностью переработан парсер файлов.</li>
                                    <li>Страница с детальными данными боя отображает корректные данные по серебру.</li>
                                    <li>Исправлена верстка окна загрузки реплея.</li>
                                    <li>Множество различных исправлений и улучшений.</li>
                                </ul>
                           </article>
                           <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-09-30">30.09.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Большие правки на странице подробного отчета. Почти все данные отображаются корректно.</li>
                                </ul>
                            </article>

                            <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-09-29">29.09.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Кнопка назад на странице с деталями реплея. Примененные фильтры не сбиваются</li>
                                    <li>Добавил поле для короткого описания при загрузке реплея.</li>
                                    <li>Небольшие правки ошибок.</li>
                                    <li>Исправления верстки.</li>
                                </ul>
                            </article>

                            <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-09-26">26.09.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Добавлены фильтры по нику игрока и клану.</li>
                                    <li>Добавлены фильтры по нику любого игрока.</li>
                                    <li>Добавлены танки в базу.</li>
                                    <li>Сделана пакетная загрузка реплеев.</li>
                                    <li>Добавил сортировку списка. Можно сначала отфильтровать интересующие, а потом отсортировать их.</li>
                                    <li>Исправления верстки.</li>
                                </ul>
                            </article>

                            <article class="changelog-entry mb-16">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-09-25">25.09.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Оптимизация загрузки картинок: страницы стали отзывчивее.</li>
                                    <li>Исправлена работа верхней кнопки «Применить» на странице фильтров.</li>
                                    <li>Добавлена история изменений на странице «О проекте».</li>
                                    <li>Исправил пагинацию страниц со списком реплеев.</li>
                                    <li>Небольшие правки ошибок.</li>
                                </ul>
                            </article>

                            <article class="changelog-entry">
                                <h3 class="mt-0 mb-8">
                                    <time datetime="2025-09-22">22.09.2025</time>
                                </h3>
                                <ul class="mb-0">
                                    <li>Запуск проекта с минимальным функционалом.</li>
                                </ul>
                            </article>
                        </div>
                    </details>
                </div>
            </section>

            <!-- контакты -->
            <section class="mb-24">
                <h2 class="mt-0">Контакты</h2>
                <div class="card">
                    <ul class="mb-0 contact-list">
                        <li>
                            <!-- envelope -->
                            <svg class="icon" viewBox="0 0 24 24" fill="none"
                                 stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
                                 aria-hidden="true" focusable="false">
                                <rect x="3" y="5" width="18" height="14" rx="2" ry="2"></rect>
                                <path d="M3 7l9 6 9-6"></path>
                            </svg>
                            <span>Почта: <a href="mailto:inetsmol@gmail.com">inetsmol@gmail.com</a></span>
                        </li>

                        <li>
                            <!-- paper-plane / telegram -->
                            <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"
                                 focusable="false">
                                <path d="M21 3L3 10l6 2 2 6 10-15z"></path>
                            </svg>
                            <span>Telegram: <a href="https://t.me/inetsmol" target="_blank" rel="noopener">@inetsmol</a></span>
                        </li>
                        <li>
                            <!-- telegram group -->
                            <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
                                <path d="M21 3L3 10l6 2 2 6 10-15z"></path>
                            </svg>
                            <span>Группа: <a href="https://t.me/lesta_replays" target="_blank" rel="noopener">@lesta_replays</a></span>
                        </li>
                        <li>
                            <span>Тема на форуме: <a
                                    href="http://forum.tanki.su/index.php?/topic/2208554-%d0%bf%d0%be%d1%80%d1%82%d0%b0%d0%bb-%d0%b4%d0%bb%d1%8f-%d1%80%d0%b5%d0%bf%d0%bb%d0%b5%d0%b5%d0%b2/"
                                    target="_blank" rel="noopener">Портал для реплеев</a></span>
                        </li>

                    </ul>
                </div>
            </section>

            <!-- дисклеймер -->
            <section class="mb-24">
                <p class="mb-0 text-muted-sm">
                    Дисклеймер: названия, логотипы, изображения карт и техники являются собственностью их
                    правообладателей.
                    Проект не аффилирован с Lesta Games. Реплеи загружаются пользователями по собственной инициативе.
                </p>
            </section>

    </div>

    <script>
        (function () {
            const det = document.getElementById('changelog-details');
            if (location.hash === '#changelog' && det) det.open = true;
        })();
    </script>

{% endblock %}
