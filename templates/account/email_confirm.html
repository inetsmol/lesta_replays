{# templates/account/email_confirm.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Подтверждение email{% endblock %}

{% block content %}
{# Пустой контент - все в модалке #}
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const confirmation = {{ confirmation|yesno:"true,false" }};

  if (window.modalManager) {
    if (confirmation) {
      // Успешное подтверждение
      window.modalManager.open('email-confirmed-modal');
    } else {
      // Ошибка подтверждения
      window.modalManager.open('email-confirm-error-modal');

      // Можно добавить конкретное сообщение об ошибке
      {% if form.errors %}
        const errorMsg = document.getElementById('error-message');
        if (errorMsg) {
          errorMsg.textContent = 'Ошибка: {{ form.errors|striptags }}';
        }
      {% endif %}
    }
  }
});
</script>
{% endblock %}